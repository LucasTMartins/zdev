sap.ui.define(["./BaseController","sap/m/MessageBox","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/model/FilterOperator","sap/m/GroupHeaderListItem","sap/ui/Device","sap/ui/core/Fragment","../model+
/formatter"],function(e,t,i,s,o,a,r,n,l,h,d){"use strict";return e.extend("com.lit.zui5.master.detail.controller.List",{formatter:d,onInit:function(){var e=this.byId("list"),t=this._createViewModel(),i=e.getBusyIndicatorDelay();this._oList=e;this._oListF+
ilterState={aFilter:[],aSearch:[]};this.setModel(t,"listView");e.attachEventOnce("updateFinished",function(){t.setProperty("/delay",i)});this.getView().addEventDelegate({onBeforeFirstShow:function(){this.getOwnerComponent().oListSelector.setBoundList(e)}+
.bind(this)});this.getRouter().getRoute("list").attachPatternMatched(this._onMasterMatched,this);this.getRouter().attachBypassed(this.onBypassed,this)},onUpdateFinished:function(e){this._updateListItemCount(e.getParameter("total"));this.onRefresh()},onSe+
arch:function(e){if(e.getParameters().refreshButtonPressed){this.onRefresh();return}var t=e.getParameter("query");if(t){this._oListFilterState.aSearch=[new o("Carrname",r.Contains,t)]}else{this._oListFilterState.aSearch=[]}this._applyFilterSearch()},onRe+
fresh:function(){this._oList.getBinding("items").refresh()},onOpenViewSettings:function(e){var t="filter";if(e.getSource()instanceof sap.m.Button){var i=e.getSource().getId();if(i.match("sort")){t="sort"}else if(i.match("group")){t="group"}}if(!this.byId+
("viewSettingsDialog")){h.load({id:this.getView().getId(),name:"com.lit.zui5.master.detail.view.ViewSettingsDialog",controller:this}).then(function(e){this.getView().addDependent(e);e.addStyleClass(this.getOwnerComponent().getContentDensityClass());e.ope+
n(t)}.bind(this))}else{this.byId("viewSettingsDialog").open(t)}},onConfirmViewSettingsDialog:function(e){this._applySortGroup(e)},_applySortGroup:function(e){var t=e.getParameters(),i,s,o=[];i=t.sortItem.getKey();s=t.sortDescending;o.push(new a(i,s));thi+
s._oList.getBinding("items").sort(o)},onSelectionChange:function(e){var t=e.getSource(),i=e.getParameter("selected");if(!(t.getMode()==="MultiSelect"&&!i)){this._showDetail(e.getParameter("listItem")||e.getSource())}},onBypassed:function(){this._oList.re+
moveSelections(true)},createGroupHeader:function(e){return new n({title:e.text,upperCase:false})},onNavBack:function(){history.go(-1)},_createViewModel:function(){return new s({isFilterBarVisible:false,filterBarLabel:"",delay:0,title:this.getResourceBund+
le().getText("listTitleCount",[0]),noDataText:this.getResourceBundle().getText("listListNoDataText"),sortBy:"Carrname",groupBy:"None"})},_onMasterMatched:function(){this.getModel("appView").setProperty("/layout","OneColumn")},_showDetail:function(e){var +
t=!l.system.phone;this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getRouter().navTo("object",{objectId:e.getBindingContext().getProperty("Carrid")},t)},_updateListItemCount:function(e){var t;if(this._oList.getBinding("items")+
.isLengthFinal()){t=this.getResourceBundle().getText("listTitleCount",[e]);this.getModel("listView").setProperty("/title",t)}},_applyFilterSearch:function(){var e=this._oListFilterState.aSearch.concat(this._oListFilterState.aFilter),t=this.getModel("list+
View");this._oList.getBinding("items").filter(e,"Application");if(e.length!==0){t.setProperty("/noDataText",this.getResourceBundle().getText("listListNoDataWithFilterOrSearchText"))}else if(this._oListFilterState.aSearch.length>0){t.setProperty("/noDataT+
ext",this.getResourceBundle().getText("listListNoDataText"))}},_updateFilterBar:function(e){var t=this.getModel("listView");t.setProperty("/isFilterBarVisible",this._oListFilterState.aFilter.length>0);t.setProperty("/filterBarLabel",this.getResourceBundl+
e().getText("listFilterBarText",[e]))},onBtnCreatePress:function(e){this._initNewCompany();if(!this.oDialogEditCompany){this.oDialogEditCompany=h.load({id:this.getView().getId(),name:"com.lit.zui5.master.detail.view.EditCompanyDialog",controller:this}).t+
hen(function(e){this.getView().addDependent(e);e.addStyleClass(this.getOwnerComponent().getContentDensityClass());this.oDialogEditCompany=e;this.oDialogEditCompany.open()}.bind(this))}else{this.oDialogEditCompany.open()}},_initNewCompany:function(){var e+
=this.getView().getModel("editCompanyModel");e.setProperty("/isNew",true);var t=this.getView().getModel();t.setDeferredGroups(["creategroupId"]);t.setChangeGroups({ScarrSet:{groupId:"creategroupId",changeSetId:"ID"}});var i=t.createEntry("/ScarrSet",{gro+
upId:"creategroupId",properties:{}});var s=this.getView();s.bindElement(i.getPath())},onSaveCompanyButtonPress:function(e){var t=this.getView().getModel();t.submitChanges({success:this.handleSuccessSave.bind(this),error:this.handleSaveError.bind(this)})}+
,onCancelNewCompany:function(e){var t=this.getView().getModel();t.resetChanges();this.oDialogEditCompany.close()},handleSuccessSave:function(e,s){var o=this.getView().getModel();if(e.__batchResponses){if(e.__batchResponses[0].response){var a=parseInt(e._+
_batchResponses[0].response.statusCode);if(a>=400){var r=JSON.parse(e.__batchResponses[0].response.body);o.resetChanges();o.refresh()}else{i.show("Salvo com sucesso!");this.oDialogEditCompany.close()}}else if(e.__batchResponses[0].__changeResponses){var +
n=e.__batchResponses[0].__changeResponses;var a=parseInt(n[0].statusCode);if(a>=400){t.alert("Erro ao Salvar");o.resetChanges();o.refresh()}else{i.show("Salvo com sucesso!");this.oDialogEditCompany.close()}}}else{i.show("Salvo com sucesso!");this.oDialog+
EditCompany.close()}},handleSaveError:function(e){if(e){if(e.responseText){var i=JSON.parse(e.responseText);t.alert(i.error.message.value)}}}})});                                                                                                             
//# sourceMappingURL=List.controller.js.map                                                                                                                                                                                                                    