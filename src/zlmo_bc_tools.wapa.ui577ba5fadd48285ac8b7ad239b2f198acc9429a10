sap.ui.define([                                                                                                                                                                                                                                                
    "sap/ui/core/Fragment"                                                                                                                                                                                                                                     
],                                                                                                                                                                                                                                                             
    function (Fragment) {                                                                                                                                                                                                                                      
        'use strict';                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
        return {                                                                                                                                                                                                                                               
            sPath: "",                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
            onEdit: function (oEvent) {                                                                                                                                                                                                                        
                this._getSelectedRow();                                                                                                                                                                                                                        
                if (this._getProperty("/Toolsid", "modelView") != undefined) { this._getValueHelpRequest() }                                                                                                                                                   
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            _getProperty: function (sProperty, sModel) {                                                                                                                                                                                                       
                return this.getView().getModel(sModel).getProperty(sProperty);                                                                                                                                                                                 
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            _setProperty: function (sPath, sProperty, sModel) {                                                                                                                                                                                                
                return this.getView().getModel(sModel).setProperty(sPath, sProperty);                                                                                                                                                                          
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            _getSelectedRow: function () {                                                                                                                                                                                                                     
                this.sPath = this.getView().byId("listReport").getTable().getSelectedContextPaths()[0];                                                                                                                                                        
                let sToolsid = this._getProperty(this.sPath + "/Toolsid");                                                                                                                                                                                     
                let sToolname = this._getProperty(this.sPath + "/Toolname");                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
                this._setProperty("/Toolsid", sToolsid, "modelView");                                                                                                                                                                                          
                this._setProperty("/Toolname", sToolname, "modelView");                                                                                                                                                                                        
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            _getValueHelpRequest: function () {                                                                                                                                                                                                                
                var oView = this.getView();                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
                if (!this._pValueHelpDialog) {                                                                                                                                                                                                                 
                    this._pValueHelpDialog = Fragment.load({                                                                                                                                                                                                   
                        id: oView.getId(),                                                                                                                                                                                                                     
                        name: "com.lit.zui5.base.ferramentas.lmo.fragment.DialogEdit",                                                                                                                                                                         
                        controller: this                                                                                                                                                                                                                       
                    }).then(function (oValueHelpDialog) {                                                                                                                                                                                                      
                        oView.addDependent(oValueHelpDialog);                                                                                                                                                                                                  
                        return oValueHelpDialog;                                                                                                                                                                                                               
                    });                                                                                                                                                                                                                                        
                }                                                                                                                                                                                                                                              
                this._pValueHelpDialog.then(function (oValueHelpDialog) {                                                                                                                                                                                      
                    oValueHelpDialog.open();                                                                                                                                                                                                                   
                }.bind(this));                                                                                                                                                                                                                                 
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            onSave: function () {                                                                                                                                                                                                                              
                var sToolsid = this._getProperty("/Toolsid", "modelView");                                                                                                                                                                                     
                var sToolname = this._getProperty("/Toolname", "modelView");                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
                this._setProperty(this.sPath + "/Toolsid", sToolsid);                                                                                                                                                                                          
                this._setProperty(this.sPath + "/Toolname", sToolname);                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
                this.getView().getModel().submitChanges();                                                                                                                                                                                                     
                this.getView().getModel().refresh();                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
                this.onClose();                                                                                                                                                                                                                                
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            onClose: function () {                                                                                                                                                                                                                             
                this.oDialog = this.getView().byId("ListDialog");                                                                                                                                                                                              
                this.oDialog.close();                                                                                                                                                                                                                          
            },                                                                                                                                                                                                                                                 
        };                                                                                                                                                                                                                                                     
    });                                                                                                                                                                                                                                                        