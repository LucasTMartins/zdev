sap.ui.define(                                                                                                                                                                                                                                                 
  [                                                                                                                                                                                                                                                            
    "sap/ui/core/mvc/Controller",                                                                                                                                                                                                                              
    "sap/ui/model/json/JSONModel",                                                                                                                                                                                                                             
    "sap/m/MessageBox",                                                                                                                                                                                                                                        
  ],                                                                                                                                                                                                                                                           
  function (Controller, JSONModel, MessageBox) {                                                                                                                                                                                                               
    "use strict";                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
    return Controller.extend(                                                                                                                                                                                                                                  
      "br.com.lit.zui5.ne.logistics.offline.controller.ColetorTransfStock",                                                                                                                                                                                    
      {                                                                                                                                                                                                                                                        
        onInit: function () {                                                                                                                                                                                                                                  
          sap.ui.getCore().applyChanges();                                                                                                                                                                                                                     
          this.byId("idWerks").focus();                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
          var oResourceBundle = this.getOwnerComponent()                                                                                                                                                                                                       
            .getModel("i18n")                                                                                                                                                                                                                                  
            .getResourceBundle();                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
          this._oResourceBundle = oResourceBundle;                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
          var letyp = "";                                                                                                                                                                                                                                      
          var lgort = "";                                                                                                                                                                                                                                      
          this._letyp = letyp;                                                                                                                                                                                                                                 
          this._lgort = lgort;                                                                                                                                                                                                                                 
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        alphaInputMaterial(material) {                                                                                                                                                                                                                         
          const totalLength = 18;                                                                                                                                                                                                                              
          const zerosNeeded = totalLength - material.length;                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
          // Adicione os zeros Ã  esquerda                                                                                                                                                                                                                      
          const alphaInputMaterial = "0".repeat(zerosNeeded) + material;                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
          return alphaInputMaterial;                                                                                                                                                                                                                           
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        alphaOutputMaterial(material) {                                                                                                                                                                                                                        
          return material.replace(/^0+/, "");                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        //Limpar dados                                                                                                                                                                                                                                         
        onClear: function () {                                                                                                                                                                                                                                 
          this.byId("idWerks").setValue("");                                                                                                                                                                                                                   
          this.byId("idLgnum").setValue("");                                                                                                                                                                                                                   
          this.byId("idVlpla").setValue("");                                                                                                                                                                                                                   
          this.byId("idVltyp").setValue("");                                                                                                                                                                                                                   
          this.byId("idMatnr").setValue("");                                                                                                                                                                                                                   
          this.byId("idMaktx").setValue("");                                                                                                                                                                                                                   
          this.byId("idCharg").setValue("");                                                                                                                                                                                                                   
          this.byId("idVerme").setValue("");                                                                                                                                                                                                                   
          this.byId("idMeins").setValue("");                                                                                                                                                                                                                   
          this.byId("idNlpla").setValue("");                                                                                                                                                                                                                   
          this.byId("idNltyp").setValue("");                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
          this.byId("idWerks").setEditable(true);                                                                                                                                                                                                              
          this.byId("idLgnum").setEditable(true);                                                                                                                                                                                                              
          this.byId("idVlpla").setEditable(true);                                                                                                                                                                                                              
          this.byId("idVltyp").setEditable(true);                                                                                                                                                                                                              
          this.byId("idMatnr").setEditable(true);                                                                                                                                                                                                              
          //   this.byId("idMaktx").setEditable(true);                                                                                                                                                                                                         
          //   this.byId("idCharg").setEditable(true);                                                                                                                                                                                                         
          this.byId("idVerme").setEditable(true);                                                                                                                                                                                                              
          // this.byId("idMeins").setEditable(true);                                                                                                                                                                                                           
          this.byId("idNlpla").setEditable(true);                                                                                                                                                                                                              
          this.byId("idNltyp").setEditable(true);                                                                                                                                                                                                              
          this.byId("idWerks").focus(false);                                                                                                                                                                                                                   
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        //Valida se o centro digitado existe na tabela                                                                                                                                                                                                         
        checkWerks: function (event) {                                                                                                                                                                                                                         
          let werks = this.byId("idWerks").getValue();                                                                                                                                                                                                         
          let url = `http://localhost:8080/v1/lgnum?werks=${werks.toUpperCase()}`;                                                                                                                                                                             
          werks = werks.replace(" ", "");                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
          $.ajax({                                                                                                                                                                                                                                             
            method: "GET",                                                                                                                                                                                                                                     
            url: url,                                                                                                                                                                                                                                          
            contentType: "application/json",                                                                                                                                                                                                                   
            success: function (response) {                                                                                                                                                                                                                     
              // Verifica se o centro digitado existe na tabela                                                                                                                                                                                                
              const exists = response.some(                                                                                                                                                                                                                    
                (item) => item.werks === werks.toUpperCase()                                                                                                                                                                                                   
              );                                                                                                                                                                                                                                               
              if (!exists) {                                                                                                                                                                                                                                   
                this.byId("idWerks").setValue("");                                                                                                                                                                                                             
                this.byId("idWerks").focus();                                                                                                                                                                                                                  
                MessageBox.error(                                                                                                                                                                                                                              
                  this._oResourceBundle.getText("werksNotFound")                                                                                                                                                                                               
                );                                                                                                                                                                                                                                             
                return;                                                                                                                                                                                                                                        
              }                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
              this.byId("idLgnum").focus();                                                                                                                                                                                                                    
              this.byId("idWerks").setValue(                                                                                                                                                                                                                   
                this.byId("idWerks").getValue().toUpperCase()                                                                                                                                                                                                  
              );                                                                                                                                                                                                                                               
              this.byId("idWerks").setEditable(false);                                                                                                                                                                                                         
            }.bind(this),                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            error: function (error) {                                                                                                                                                                                                                          
              this.byId("idWerks").setValue("");                                                                                                                                                                                                               
              this.byId("idWerks").focus();                                                                                                                                                                                                                    
              MessageBox.error(this._oResourceBundle.getText("werksNotFound"));                                                                                                                                                                                
            }.bind(this),                                                                                                                                                                                                                                      
          });                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        //Valida o NÂº Dep. digitado existe na tabela                                                                                                                                                                                                           
        checkLgnum: function (event) {                                                                                                                                                                                                                         
          let werks = this.byId("idWerks").getValue();                                                                                                                                                                                                         
          let lgnum = this.byId("idLgnum").getValue();                                                                                                                                                                                                         
          let url = `http://localhost:8080/v1/lgnum?lgnum=${lgnum.toUpperCase()}`;                                                                                                                                                                             
                                                                                                                                                                                                                                                               
          if (werks == "") {                                                                                                                                                                                                                                   
            this.byId("idLgnum").setValue("");                                                                                                                                                                                                                 
            this.byId("idWerks").focus(false);                                                                                                                                                                                                                 
            MessageBox.error(this._oResourceBundle.getText("werksObrigatory"));                                                                                                                                                                                
            return;                                                                                                                                                                                                                                            
          }                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
          lgnum = lgnum.replace(" ", "");                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
          $.ajax({                                                                                                                                                                                                                                             
            method: "GET",                                                                                                                                                                                                                                     
            url: url,                                                                                                                                                                                                                                          
            contentType: "application/json",                                                                                                                                                                                                                   
            success: function (response) {                                                                                                                                                                                                                     
              if (response.length == 0) {                                                                                                                                                                                                                      
                this.byId("idLgnum").setValue("");                                                                                                                                                                                                             
                this.byId("idLgnum").focus();                                                                                                                                                                                                                  
                MessageBox.error(                                                                                                                                                                                                                              
                  this._oResourceBundle.getText("lgnumNotFound")                                                                                                                                                                                               
                );                                                                                                                                                                                                                                             
                return;                                                                                                                                                                                                                                        
              }                                                                                                                                                                                                                                                
              this.byId("idVltyp").focus();                                                                                                                                                                                                                    
              this.byId("idLgnum").setValue(                                                                                                                                                                                                                   
                this.byId("idLgnum").getValue().toUpperCase()                                                                                                                                                                                                  
              );                                                                                                                                                                                                                                               
              this.byId("idLgnum").setEditable(false);                                                                                                                                                                                                         
            }.bind(this),                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            error: function (error) {                                                                                                                                                                                                                          
              this.byId("idLgnum").setValue("");                                                                                                                                                                                                               
              this.byId("idLgnum").focus();                                                                                                                                                                                                                    
              MessageBox.error(this._oResourceBundle.getText("lgnumNotFound"));                                                                                                                                                                                
            }.bind(this),                                                                                                                                                                                                                                      
          });                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        //Valida se o tp.dep. origem existe na tabela                                                                                                                                                                                                          
        checkVltyp: function (event) {                                                                                                                                                                                                                         
          let vltyp = this.byId("idVltyp").getValue();                                                                                                                                                                                                         
          let lgnum = this.byId("idLgnum").getValue();                                                                                                                                                                                                         
          let url = `http://localhost:8080/v1/lgtyp?lgnum=${lgnum}&lgtyp=${vltyp}`;                                                                                                                                                                            
                                                                                                                                                                                                                                                               
          if (lgnum == "") {                                                                                                                                                                                                                                   
            this.byId("idVltyp").setValue("");                                                                                                                                                                                                                 
            this.byId("idLgnum").focus(false);                                                                                                                                                                                                                 
            MessageBox.error(this._oResourceBundle.getText("lgnumObrigatory"));                                                                                                                                                                                
            return;                                                                                                                                                                                                                                            
          }                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
          vltyp = vltyp.replace(" ", "");                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
          $.ajax({                                                                                                                                                                                                                                             
            method: "GET",                                                                                                                                                                                                                                     
            url: url,                                                                                                                                                                                                                                          
            contentType: "application/json",                                                                                                                                                                                                                   
            success: function (response) {                                                                                                                                                                                                                     
              if (response.length == 0) {                                                                                                                                                                                                                      
                this.byId("idVltyp").setValue("");                                                                                                                                                                                                             
                this.byId("idVltyp").focus();                                                                                                                                                                                                                  
                MessageBox.error(                                                                                                                                                                                                                              
                  this._oResourceBundle.getText("vltypNotFound")                                                                                                                                                                                               
                );                                                                                                                                                                                                                                             
                return;                                                                                                                                                                                                                                        
              }                                                                                                                                                                                                                                                
              this.byId("idVlpla").focus();                                                                                                                                                                                                                    
              this.byId("idVltyp").setValue(                                                                                                                                                                                                                   
                this.byId("idVltyp").getValue().toUpperCase()                                                                                                                                                                                                  
              );                                                                                                                                                                                                                                               
              this.byId("idVltyp").setEditable(false);                                                                                                                                                                                                         
            }.bind(this),                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            error: function (error) {                                                                                                                                                                                                                          
              this.byId("idVltyp").setValue("");                                                                                                                                                                                                               
              this.byId("idVltyp").focus();                                                                                                                                                                                                                    
              MessageBox.error(this._oResourceBundle.getText("vltypNotFound"));                                                                                                                                                                                
            }.bind(this),                                                                                                                                                                                                                                      
          });                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        //Valida se a posiÃ§Ã£o de origem existe na tabela                                                                                                                                                                                                       
        checkVlpla: function (event) {                                                                                                                                                                                                                         
          let vltyp = this.byId("idVltyp").getValue();                                                                                                                                                                                                         
          let vlpla = this.byId("idVlpla").getValue();                                                                                                                                                                                                         
          let lgnum = this.byId("idLgnum").getValue();                                                                                                                                                                                                         
          let url = `http://localhost:8080/v1/lagp?lgnum=${lgnum}&lgtyp=${vltyp}&lgpla=${vlpla}`;                                                                                                                                                              
                                                                                                                                                                                                                                                               
          if (vltyp == "") {                                                                                                                                                                                                                                   
            this.byId("idVlpla").setValue("");                                                                                                                                                                                                                 
            this.byId("idVltyp").focus(false);                                                                                                                                                                                                                 
            MessageBox.error(this._oResourceBundle.getText("vltypObrigatory"));                                                                                                                                                                                
            return;                                                                                                                                                                                                                                            
          }                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
          vlpla = vlpla.replace(" ", "");                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
          $.ajax({                                                                                                                                                                                                                                             
            method: "GET",                                                                                                                                                                                                                                     
            url: url,                                                                                                                                                                                                                                          
            contentType: "application/json",                                                                                                                                                                                                                   
            success: function (response) {                                                                                                                                                                                                                     
              if (response.length == 0) {                                                                                                                                                                                                                      
                this.byId("idVlpla").setValue("");                                                                                                                                                                                                             
                this.byId("idVlpla").focus();                                                                                                                                                                                                                  
                MessageBox.error(                                                                                                                                                                                                                              
                  this._oResourceBundle.getText("vlplaNotFound", [vltyp])                                                                                                                                                                                      
                );                                                                                                                                                                                                                                             
                return;                                                                                                                                                                                                                                        
              }                                                                                                                                                                                                                                                
              this.byId("idMatnr").focus();                                                                                                                                                                                                                    
              this.byId("idVlpla").setValue(                                                                                                                                                                                                                   
                this.byId("idVlpla").getValue().toUpperCase()                                                                                                                                                                                                  
              );                                                                                                                                                                                                                                               
              this.byId("idVlpla").setEditable(false);                                                                                                                                                                                                         
            }.bind(this),                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            error: function (error) {                                                                                                                                                                                                                          
              this.byId("idVlpla").setValue("");                                                                                                                                                                                                               
              this.byId("idVlpla").focus();                                                                                                                                                                                                                    
              MessageBox.error(this._oResourceBundle.getText("vlplaNotFound"));                                                                                                                                                                                
            }.bind(this),                                                                                                                                                                                                                                      
          });                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        //Valida se o material existe na tabela                                                                                                                                                                                                                
        checkMatnr: function (event) {                                                                                                                                                                                                                         
          let vltyp = this.byId("idVltyp").getValue();                                                                                                                                                                                                         
          let vlpla = this.byId("idVlpla").getValue();                                                                                                                                                                                                         
          let matnr = this.byId("idMatnr").getValue();                                                                                                                                                                                                         
          let lgnum = this.byId("idLgnum").getValue();                                                                                                                                                                                                         
          matnr = this.alphaInputMaterial(matnr);                                                                                                                                                                                                              
          matnr = matnr.replace(" ", "");                                                                                                                                                                                                                      
          let url = `http://localhost:8080/v1/lqua?lgnum=${lgnum}&lgtyp=${vltyp}&lgpla=${vlpla}&matnr=${matnr}`;                                                                                                                                               
                                                                                                                                                                                                                                                               
          if (vlpla == "") {                                                                                                                                                                                                                                   
            this.byId("idMatnr").setValue("");                                                                                                                                                                                                                 
            this.byId("idVlpla").focus(false);                                                                                                                                                                                                                 
            MessageBox.error(this._oResourceBundle.getText("vlplaObrigatory"));                                                                                                                                                                                
            return;                                                                                                                                                                                                                                            
          }                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
          $.ajax({                                                                                                                                                                                                                                             
            method: "GET",                                                                                                                                                                                                                                     
            url: url,                                                                                                                                                                                                                                          
            contentType: "application/json",                                                                                                                                                                                                                   
            success: function (response) {                                                                                                                                                                                                                     
              if (response.length == 0) {                                                                                                                                                                                                                      
                this.byId("idMatnr").setValue("");                                                                                                                                                                                                             
                this.byId("idMatnr").focus();                                                                                                                                                                                                                  
                MessageBox.error(                                                                                                                                                                                                                              
                  this._oResourceBundle.getText("matnrNotFound")                                                                                                                                                                                               
                );                                                                                                                                                                                                                                             
                return;                                                                                                                                                                                                                                        
              }                                                                                                                                                                                                                                                
              this.byId("idVerme").focus();                                                                                                                                                                                                                    
              this.byId("idMatnr").setValue(                                                                                                                                                                                                                   
                this.byId("idMatnr").getValue().toUpperCase()                                                                                                                                                                                                  
              );                                                                                                                                                                                                                                               
              this.letyp = response[0].letyp;                                                                                                                                                                                                                  
              this.lgort = response[0].lgort;                                                                                                                                                                                                                  
              var matnrWithZero = this.byId("idMatnr").getValue();                                                                                                                                                                                             
              matnrWithZero.replace(/^0+/, ""); //Remove os zeros a esquerda                                                                                                                                                                                   
              this.byId("idMatnr").setValue(matnrWithZero);                                                                                                                                                                                                    
              this.byId("idMatnr").setEditable(false);                                                                                                                                                                                                         
              this.byId("idMaktx").setValue(response[0].maktx);                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
              if (response[0].charg == 0) {                                                                                                                                                                                                                    
                this.byId("idCharg").setValue("");                                                                                                                                                                                                             
              } else {                                                                                                                                                                                                                                         
                this.byId("idCharg").setValue(response[0].charg);                                                                                                                                                                                              
              }                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
              this.byId("idMeins").setValue(response[0].meins);                                                                                                                                                                                                
            }.bind(this),                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            error: function (error) {                                                                                                                                                                                                                          
              this.byId("idMatnr").setValue("");                                                                                                                                                                                                               
              this.byId("idMatnr").focus();                                                                                                                                                                                                                    
              MessageBox.error(this._oResourceBundle.getText("matnrNotFound"));                                                                                                                                                                                
            }.bind(this),                                                                                                                                                                                                                                      
          });                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        //Valida se a qtd existe na tabela                                                                                                                                                                                                                     
        checkVerme: function (event) {                                                                                                                                                                                                                         
          const regex = /[^0-9]/;                                                                                                                                                                                                                              
          let vltyp = this.byId("idVltyp").getValue();                                                                                                                                                                                                         
          let vlpla = this.byId("idVlpla").getValue();                                                                                                                                                                                                         
          let matnr = this.byId("idMatnr").getValue();                                                                                                                                                                                                         
          let lgnum = this.byId("idLgnum").getValue();                                                                                                                                                                                                         
          let verme = this.byId("idVerme").getValue();                                                                                                                                                                                                         
          matnr = this.alphaInputMaterial(matnr);                                                                                                                                                                                                              
          let url = `http://localhost:8080/v1/lqua?lgnum=${lgnum}&lgtyp=${vltyp}&lgpla=${vlpla}&matnr=${matnr}`;                                                                                                                                               
                                                                                                                                                                                                                                                               
          if (matnr == "") {                                                                                                                                                                                                                                   
            this.byId("idVerme").setValue("");                                                                                                                                                                                                                 
            this.byId("idMatnr").focus(false);                                                                                                                                                                                                                 
            MessageBox.error(this._oResourceBundle.getText("matnrObrigatory"));                                                                                                                                                                                
            return;                                                                                                                                                                                                                                            
          }                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
          if (regex.test(verme)) {                                                                                                                                                                                                                             
            this.byId("idVerme").setValue("");                                                                                                                                                                                                                 
            this.byId("idVerme").focus(false);                                                                                                                                                                                                                 
            MessageBox.error(this._oResourceBundle.getText("vermeInvalid"));                                                                                                                                                                                   
            return;                                                                                                                                                                                                                                            
          }                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
          verme = verme.replace(" ", "");                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
          $.ajax({                                                                                                                                                                                                                                             
            method: "GET",                                                                                                                                                                                                                                     
            url: url,                                                                                                                                                                                                                                          
            contentType: "application/json",                                                                                                                                                                                                                   
            success: function (response) {                                                                                                                                                                                                                     
              if (response.length == 0) {                                                                                                                                                                                                                      
                this.byId("idVerme").setValue("");                                                                                                                                                                                                             
                this.byId("idVerme").focus();                                                                                                                                                                                                                  
                MessageBox.error(                                                                                                                                                                                                                              
                  this._oResourceBundle.getText("matnrNotFound")                                                                                                                                                                                               
                );                                                                                                                                                                                                                                             
                return;                                                                                                                                                                                                                                        
              }                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
              if (verme > response[0].verme) {                                                                                                                                                                                                                 
                MessageBox.error(                                                                                                                                                                                                                              
                  this._oResourceBundle.getText("vermeIsLarger")                                                                                                                                                                                               
                );                                                                                                                                                                                                                                             
                this.byId("idVerme").setValue("");                                                                                                                                                                                                             
                this.byId("idVerme").focus();                                                                                                                                                                                                                  
                return;                                                                                                                                                                                                                                        
              }                                                                                                                                                                                                                                                
              this.byId("idNltyp").focus(false);                                                                                                                                                                                                               
              this.byId("idVerme").setValue(                                                                                                                                                                                                                   
                this.byId("idVerme").getValue().toUpperCase()                                                                                                                                                                                                  
              );                                                                                                                                                                                                                                               
              //   this.byId("idVerme").setEditable(false);                                                                                                                                                                                                    
            }.bind(this),                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            error: function (error) {                                                                                                                                                                                                                          
              this.byId("idVerme").setValue("");                                                                                                                                                                                                               
              this.byId("idVerme").focus();                                                                                                                                                                                                                    
              MessageBox.error(this._oResourceBundle.getText("matnrNotFound"));                                                                                                                                                                                
            }.bind(this),                                                                                                                                                                                                                                      
          });                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        //Valida se o tp.dep. destino existe na tabela                                                                                                                                                                                                         
        checkNltyp: function (event) {                                                                                                                                                                                                                         
          let nltyp = this.byId("idNltyp").getValue();                                                                                                                                                                                                         
          let verme = this.byId("idVerme").getValue();                                                                                                                                                                                                         
          let lgnum = this.byId("idLgnum").getValue();                                                                                                                                                                                                         
          let url = `http://localhost:8080/v1/lgtyp?lgnum=${lgnum}&lgtyp=${nltyp}`;                                                                                                                                                                            
                                                                                                                                                                                                                                                               
          if (verme == "") {                                                                                                                                                                                                                                   
            this.byId("idNltyp").setValue("");                                                                                                                                                                                                                 
            this.byId("idVerme").focus(false);                                                                                                                                                                                                                 
            MessageBox.error(this._oResourceBundle.getText("vermeObrigatory"));                                                                                                                                                                                
            return;                                                                                                                                                                                                                                            
          }                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
          nltyp = nltyp.replace(" ", "");                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
          $.ajax({                                                                                                                                                                                                                                             
            method: "GET",                                                                                                                                                                                                                                     
            url: url,                                                                                                                                                                                                                                          
            contentType: "application/json",                                                                                                                                                                                                                   
            success: function (response) {                                                                                                                                                                                                                     
              if (response.length == 0) {                                                                                                                                                                                                                      
                this.byId("idNltyp").setValue("");                                                                                                                                                                                                             
                this.byId("idNltyp").focus();                                                                                                                                                                                                                  
                MessageBox.error(                                                                                                                                                                                                                              
                  this._oResourceBundle.getText("nltypNotFound")                                                                                                                                                                                               
                );                                                                                                                                                                                                                                             
                return;                                                                                                                                                                                                                                        
              }                                                                                                                                                                                                                                                
              this.byId("idNlpla").focus(false);                                                                                                                                                                                                               
              this.byId("idNltyp").setValue(                                                                                                                                                                                                                   
                this.byId("idNltyp").getValue().toUpperCase()                                                                                                                                                                                                  
              );                                                                                                                                                                                                                                               
              this.byId("idNltyp").setEditable(false);                                                                                                                                                                                                         
            }.bind(this),                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            error: function (error) {                                                                                                                                                                                                                          
              this.byId("idNltyp").setValue("");                                                                                                                                                                                                               
              this.byId("idNltyp").focus();                                                                                                                                                                                                                    
              MessageBox.error(this._oResourceBundle.getText("nltypNotFound"));                                                                                                                                                                                
            }.bind(this),                                                                                                                                                                                                                                      
          });                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        //Valida se a posiÃ§Ã£o destino existe na tabela                                                                                                                                                                                                         
        checkNlpla: function (event) {                                                                                                                                                                                                                         
          let nltyp = this.byId("idNltyp").getValue();                                                                                                                                                                                                         
          let nlpla = this.byId("idNlpla").getValue();                                                                                                                                                                                                         
          let lgnum = this.byId("idLgnum").getValue();                                                                                                                                                                                                         
          let url = `http://localhost:8080/v1/lagp?lgnum=${lgnum}&lgtyp=${nltyp}&lgpla=${nlpla}`;                                                                                                                                                              
                                                                                                                                                                                                                                                               
          if (nltyp == "") {                                                                                                                                                                                                                                   
            this.byId("idNlpla").setValue("");                                                                                                                                                                                                                 
            this.byId("idNltyp").focus(false);                                                                                                                                                                                                                 
            MessageBox.error(this._oResourceBundle.getText("nltypObrigatory"));                                                                                                                                                                                
            return;                                                                                                                                                                                                                                            
          }                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
          nlpla = nlpla.replace(" ", "");                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
          $.ajax({                                                                                                                                                                                                                                             
            method: "GET",                                                                                                                                                                                                                                     
            url: url,                                                                                                                                                                                                                                          
            contentType: "application/json",                                                                                                                                                                                                                   
            success: function (response) {                                                                                                                                                                                                                     
              if (response.length == 0) {                                                                                                                                                                                                                      
                this.byId("idNlpla").setValue("");                                                                                                                                                                                                             
                this.byId("idNlpla").focus();                                                                                                                                                                                                                  
                MessageBox.error(                                                                                                                                                                                                                              
                  this._oResourceBundle.getText("nlplaNotFound", [nltyp])                                                                                                                                                                                      
                );                                                                                                                                                                                                                                             
                return;                                                                                                                                                                                                                                        
              }                                                                                                                                                                                                                                                
              this.byId("btnSave").focus();                                                                                                                                                                                                                    
              this.byId("idNlpla").setValue(                                                                                                                                                                                                                   
                this.byId("idNlpla").getValue().toUpperCase()                                                                                                                                                                                                  
              );                                                                                                                                                                                                                                               
              this.byId("idNlpla").setEditable(false);                                                                                                                                                                                                         
            }.bind(this),                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
            error: function (error) {                                                                                                                                                                                                                          
              this.byId("idNlpla").setValue("");                                                                                                                                                                                                               
              this.byId("idNlpla").focus();                                                                                                                                                                                                                    
              MessageBox.error(this._oResourceBundle.getText("nlplaNotFound"));                                                                                                                                                                                
            }.bind(this),                                                                                                                                                                                                                                      
          });                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        onSave: function (event) {                                                                                                                                                                                                                             
          const username = this.getOwnerComponent().USERNAME;                                                                                                                                                                                                  
          const password = this.getOwnerComponent().PASSWORD;                                                                                                                                                                                                  
          let url = "";                                                                                                                                                                                                                                        
          let url_put;                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
          //ConstruÃ§Ã£o do timestamp                                                                                                                                                                                                                            
          const now = new Date();                                                                                                                                                                                                                              
          const ano = now.getFullYear();                                                                                                                                                                                                                       
          const mes = String(now.getMonth() + 1).padStart(2, "0"); // Janeiro Ã© 0                                                                                                                                                                              
          const dia = String(now.getDate()).padStart(2, "0");                                                                                                                                                                                                  
          const horas = String(now.getHours()).padStart(2, "0");                                                                                                                                                                                               
          const minutos = String(now.getMinutes()).padStart(2, "0");                                                                                                                                                                                           
          const segundos = String(now.getSeconds()).padStart(2, "0");                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
          // Monta o formato yyyy-MM-ddTHH:mm:ss                                                                                                                                                                                                               
          const timestamp = `${ano}-${mes}-${dia}T${horas}:${minutos}:${segundos}`;                                                                                                                                                                            
                                                                                                                                                                                                                                                               
          //Busca dos dados digitados na tela                                                                                                                                                                                                                  
          let lgnum = this.byId("idLgnum").getValue();                                                                                                                                                                                                         
          let werks = this.byId("idWerks").getValue();                                                                                                                                                                                                         
          let vltyp = this.byId("idVltyp").getValue();                                                                                                                                                                                                         
          let vlpla = this.byId("idVlpla").getValue();                                                                                                                                                                                                         
          let matnr = this.byId("idMatnr").getValue();                                                                                                                                                                                                         
          let charg = this.byId("idCharg").getValue();                                                                                                                                                                                                         
          let meins = this.byId("idMeins").getValue();                                                                                                                                                                                                         
          let verme = this.byId("idVerme").getValue();                                                                                                                                                                                                         
          let nltyp = this.byId("idNltyp").getValue();                                                                                                                                                                                                         
          let nlpla = this.byId("idNlpla").getValue();                                                                                                                                                                                                         
          let idIntfSap;                                                                                                                                                                                                                                       
          let letyp = this.letyp;                                                                                                                                                                                                                              
          let lgort = this.lgort;                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
          if (charg == "") {                                                                                                                                                                                                                                   
            charg = 0;                                                                                                                                                                                                                                         
          }                                                                                                                                                                                                                                                    
          let that = this;                                                                                                                                                                                                                                     
          //Coloca zeros a esquerda                                                                                                                                                                                                                            
          matnr = this.alphaInputMaterial(matnr);                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
          //Monta OData para inserÃ§Ã£o na tabela de interface                                                                                                                                                                                                   
          let oData = {                                                                                                                                                                                                                                        
            werks: werks,                                                                                                                                                                                                                                      
            vltyp: vltyp,                                                                                                                                                                                                                                      
            vlpla: vlpla,                                                                                                                                                                                                                                      
            nltyp: nltyp,                                                                                                                                                                                                                                      
            nlpla: nlpla,                                                                                                                                                                                                                                      
            matnr: matnr,                                                                                                                                                                                                                                      
            charg: charg,                                                                                                                                                                                                                                      
            verme: verme,                                                                                                                                                                                                                                      
            meins: meins,                                                                                                                                                                                                                                      
            letyp: this.letyp,                                                                                                                                                                                                                                 
            msg: "Material pendente de criaÃ§Ã£o de OT",                                                                                                                                                                                                         
            crdate: timestamp,                                                                                                                                                                                                                                 
            status: "PENDING",                                                                                                                                                                                                                                 
            active: true                                                                                                                                                                                                                                       
          };                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
          //Verifico se o usuÃ¡rio jÃ¡ fez a transferÃªncia de posiÃ§Ã£o com os mesmos dados                                                                                                                                                                        
          $.ajax({                                                                                                                                                                                                                                             
            method: "GET",                                                                                                                                                                                                                                     
            url: "http://localhost:8080/v1/intfsap",                                                                                                                                                                                                           
            contentType: "application/json",                                                                                                                                                                                                                   
            success: function (response) {                                                                                                                                                                                                                     
              //Verifico se os dados sÃ£o todos iguais                                                                                                                                                                                                          
              let isCurrentLineEqualCurrentLine = response.some(                                                                                                                                                                                               
                (row) =>                                                                                                                                                                                                                                       
                  row.lgnum.lgnum === lgnum &&                                                                                                                                                                                                                 
                  row.werks === werks &&                                                                                                                                                                                                                       
                  row.vltyp === vltyp &&                                                                                                                                                                                                                       
                  row.vlpla === vlpla &&                                                                                                                                                                                                                       
                  row.matnr === matnr &&                                                                                                                                                                                                                       
                  row.charg === charg &&                                                                                                                                                                                                                       
                  row.meins === meins &&                                                                                                                                                                                                                       
                  row.nltyp === nltyp &&                                                                                                                                                                                                                       
                  row.nlpla === nlpla                                                                                                                                                                                                                          
              )                                                                                                                                                                                                                                                
                ? "X"                                                                                                                                                                                                                                          
                : "";                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
              //Se sÃ£o iguais chama um popup perguntando se ele deseja realizar novamente a transferÃªncia para aquela posiÃ§Ã£o                                                                                                                                  
              if (isCurrentLineEqualCurrentLine == "X") {                                                                                                                                                                                                      
                MessageBox.warning(                                                                                                                                                                                                                            
                  `TransferÃªncia para a posiÃ§Ã£o ${nlpla} jÃ¡ foi realizada anteriormente. Deseja realizar novamente a transferÃªncia?`,                                                                                                                          
                  {                                                                                                                                                                                                                                            
                    actions: [MessageBox.Action.OK, MessageBox.Action.CANCEL],                                                                                                                                                                                 
                    emphasizedAction: MessageBox.Action.OK,                                                                                                                                                                                                    
                    onClose: function (sAction) {                                                                                                                                                                                                              
                      if (sAction === MessageBox.Action.OK) {                                                                                                                                                                                                  
                        //Caso ele selecione o OK, primeiro buscamos a quantidade que estÃ¡ na tabela de Saldo                                                                                                                                                  
                        $.ajax({                                                                                                                                                                                                                               
                          method: "GET",                                                                                                                                                                                                                       
                          url: `http://localhost:8080/v1/lqua?werks=${werks}&lgtyp=${vltyp}&lgpla=${vlpla}&matnr=${matnr}`,                                                                                                                                    
                          contentType: "application/json",                                                                                                                                                                                                     
                          success: function (response) {                                                                                                                                                                                                       
                            //Se sucesso eu subtraio a quantidade da tabela com a quantidade solicitada                                                                                                                                                        
                            //Ex.: QTD TOTAL (50) - QTD SOL (10) = 40                                                                                                                                                                                          
                            //verme = response[0].verme - verme;                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
                            url = "";                                                                                                                                                                                                                          
                            url = `http://localhost:8080/v1/intfsap/${werks}`;                                                                                                                                                                                 
                            //Aqui fazemos a inserÃ§Ã£o na tabela da interface                                                                                                                                                                                   
                            $.ajax({                                                                                                                                                                                                                           
                              method: "POST",                                                                                                                                                                                                                  
                              url: url,                                                                                                                                                                                                                        
                              contentType: "application/json",                                                                                                                                                                                                 
                              data: JSON.stringify(oData),                                                                                                                                                                                                     
                              success: function (response) {                                                                                                                                                                                                   
                                idIntfSap = response.id;                                                                                                                                                                                                       
                                //Se sucesso, tentamos criar a OT no SAP                                                                                                                                                                                       
                                $.ajax({                                                                                                                                                                                                                       
                                  method: "POST",                                                                                                                                                                                                              
                                  url: "/proxy/sap/bc/gui/sap/its/fmcall_json/ZWMF_TRANSF_POSICAO_API",                                                                                                                                                        
                                  contentType: "application/json",                                                                                                                                                                                             
                                  headers: {                                                                                                                                                                                                                   
                                    Authorization:                                                                                                                                                                                                             
                                      "Basic " +                                                                                                                                                                                                               
                                      btoa(username + ":" + password),                                                                                                                                                                                         
                                  },                                                                                                                                                                                                                           
                                  data: JSON.stringify({                                                                                                                                                                                                       
                                    I_LGNUM: lgnum,                                                                                                                                                                                                            
                                    I_MATNR: matnr,                                                                                                                                                                                                            
                                    I_WERKS: werks,                                                                                                                                                                                                            
                                    I_LGORT: lgort,                                                                                                                                                                                                            
                                    I_CHARG: charg,                                                                                                                                                                                                            
                                    I_LETYP: letyp,                                                                                                                                                                                                            
                                    I_ANFME: verme,                                                                                                                                                                                                            
                                    I_ALTME: meins,                                                                                                                                                                                                            
                                    I_VLTYP: vltyp,                                                                                                                                                                                                            
                                    I_VLPLA: vlpla,                                                                                                                                                                                                            
                                    I_NLTYP: nltyp,                                                                                                                                                                                                            
                                    I_NLPLA: nlpla,                                                                                                                                                                                                            
                                  }),                                                                                                                                                                                                                          
                                  success: function (response) {                                                                                                                                                                                               
                                    const successMessage =                                                                                                                                                                                                     
                                      "TranferÃªncia realizada com sucesso";                                                                                                                                                                                    
                                    //Se sucesso na criaÃ§Ã£o da OT, atualizo com o STATUS PROCESSED e MSG                                                                                                                                                       
                                    let message =                                                                                                                                                                                                              
                                      response.E_STATUS === "SUCCESS"                                                                                                                                                                                          
                                        ? successMessage                                                                                                                                                                                                       
                                        : response.E_MSG;                                                                                                                                                                                                      
                                    message = successMessage;                                                                                                                                                                                                  
                                    let status = response.E_STATUS;                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
                                    $.ajax({                                                                                                                                                                                                                   
                                      method: "GET",                                                                                                                                                                                                           
                                      url:                                                                                                                                                                                                                     
                                        "http://localhost:8080/v1/intfsap/" +                                                                                                                                                                                  
                                        idIntfSap,                                                                                                                                                                                                             
                                      contentType: "application/json",                                                                                                                                                                                         
                                      success: function (response) {                                                                                                                                                                                           
                                        response.msg = message;                                                                                                                                                                                                
                                        response.status = status;                                                                                                                                                                                              
                                        $.ajax({                                                                                                                                                                                                               
                                          method: "PUT",                                                                                                                                                                                                       
                                          url:                                                                                                                                                                                                                 
                                            "http://localhost:8080/v1/intfsap/" +                                                                                                                                                                              
                                            idIntfSap,                                                                                                                                                                                                         
                                          contentType: "application/json",                                                                                                                                                                                     
                                          data: JSON.stringify(response),                                                                                                                                                                                      
                                          success: function (response) {                                                                                                                                                                                       
                                            MessageBox.success(                                                                                                                                                                                                
                                              "TransferÃªncia realizada com sucesso!"                                                                                                                                                                           
                                            );                                                                                                                                                                                                                 
                                            that.onClear();                                                                                                                                                                                                    
                                          }.bind(this),                                                                                                                                                                                                        
                                        });                                                                                                                                                                                                                    
                                      },                                                                                                                                                                                                                       
                                    });                                                                                                                                                                                                                        
                                  },                                                                                                                                                                                                                           
                                });                                                                                                                                                                                                                            
                              }.bind(this),                                                                                                                                                                                                                    
                              error: function (error) {                                                                                                                                                                                                        
                                // let url_put = `http://localhost:8080/v1/lqua/${werks}/${vltyp}/${vlpla}/${matnr}/${charg}/${verme}/updatebalance`;                                                                                                          
                                // $.ajax({                                                                                                                                                                                                                    
                                //   method: "GET",                                                                                                                                                                                                            
                                //   url: url_put,                                                                                                                                                                                                             
                                //   contentType: "application/json",                                                                                                                                                                                          
                                //   success: function (response) {                                                                                                                                                                                            
                                //     MessageBox.success(                                                                                                                                                                                                     
                                //       "TransferÃªncia realizada com sucesso!"                                                                                                                                                                                
                                //     );                                                                                                                                                                                                                      
                                //     this.onClear();                                                                                                                                                                                                         
                                //   },                                                                                                                                                                                                                        
                                // });                                                                                                                                                                                                                         
                              }.bind(this),                                                                                                                                                                                                                    
                            });                                                                                                                                                                                                                                
                          },                                                                                                                                                                                                                                   
                          error: function (error) {                                                                                                                                                                                                            
                            console.log(error);                                                                                                                                                                                                                
                          },                                                                                                                                                                                                                                   
                        });                                                                                                                                                                                                                                    
                      } else if (sAction === MessageBox.Action.CANCEL) {                                                                                                                                                                                       
                        return;                                                                                                                                                                                                                                
                      }                                                                                                                                                                                                                                        
                    }.bind(this),                                                                                                                                                                                                                              
                    dependentOn: this.getView(),                                                                                                                                                                                                               
                  }                                                                                                                                                                                                                                            
                );                                                                                                                                                                                                                                             
              } else {                                                                                                                                                                                                                                         
                $.ajax({                                                                                                                                                                                                                                       
                  method: "GET",                                                                                                                                                                                                                               
                  url: `http://localhost:8080/v1/lqua?werks=${werks}&lgtyp=${vltyp}&lgpla=${vlpla}&matnr=${matnr}`,                                                                                                                                            
                  contentType: "application/json",                                                                                                                                                                                                             
                  success: function (response) {                                                                                                                                                                                                               
                    //Se sucesso eu subtraio a quantidade da tabela com a quantidade solicitada                                                                                                                                                                
                    //Ex.: QTD TOTAL (50) - QTD SOL (10) = 40                                                                                                                                                                                                  
                    //verme = response[0].verme - verme;                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
                    url = "";                                                                                                                                                                                                                                  
                    url = `http://localhost:8080/v1/intfsap/${werks}`;                                                                                                                                                                                         
                    //Aqui fazemos a inserÃ§Ã£o na tabela da interface                                                                                                                                                                                           
                    $.ajax({                                                                                                                                                                                                                                   
                      method: "POST",                                                                                                                                                                                                                          
                      url: url,                                                                                                                                                                                                                                
                      contentType: "application/json",                                                                                                                                                                                                         
                      data: JSON.stringify(oData),                                                                                                                                                                                                             
                      success: function (response) {                                                                                                                                                                                                           
                        idIntfSap = response.id;                                                                                                                                                                                                               
                        //Se sucesso, tentamos criar a OT no SAP                                                                                                                                                                                               
                        $.ajax({                                                                                                                                                                                                                               
                          method: "POST",                                                                                                                                                                                                                      
                          url: "/proxy/sap/bc/gui/sap/its/fmcall_json/ZWMF_TRANSF_POSICAO_API",                                                                                                                                                                
                          contentType: "application/json",                                                                                                                                                                                                     
                          headers: {                                                                                                                                                                                                                           
                            Authorization:                                                                                                                                                                                                                     
                              "Basic " + btoa(username + ":" + password),                                                                                                                                                                                      
                          },                                                                                                                                                                                                                                   
                          data: JSON.stringify({                                                                                                                                                                                                               
                            I_LGNUM: lgnum,                                                                                                                                                                                                                    
                            I_MATNR: matnr,                                                                                                                                                                                                                    
                            I_WERKS: werks,                                                                                                                                                                                                                    
                            I_LGORT: lgort,                                                                                                                                                                                                                    
                            I_CHARG: charg,                                                                                                                                                                                                                    
                            I_LETYP: letyp,                                                                                                                                                                                                                    
                            I_ANFME: verme,                                                                                                                                                                                                                    
                            I_ALTME: meins,                                                                                                                                                                                                                    
                            I_VLTYP: vltyp,                                                                                                                                                                                                                    
                            I_VLPLA: vlpla,                                                                                                                                                                                                                    
                            I_NLTYP: nltyp,                                                                                                                                                                                                                    
                            I_NLPLA: nlpla,                                                                                                                                                                                                                    
                          }),                                                                                                                                                                                                                                  
                          success: function (response) {                                                                                                                                                                                                       
                            const successMessage =                                                                                                                                                                                                             
                              "TranferÃªncia realizada com sucesso";                                                                                                                                                                                            
                            //Se sucesso na criaÃ§Ã£o da OT, atualizo com o STATUS PROCESSED e MSG                                                                                                                                                               
                            let message =                                                                                                                                                                                                                      
                              response.E_STATUS === "SUCCESS"                                                                                                                                                                                                  
                                ? successMessage                                                                                                                                                                                                               
                                : response.E_MSG;                                                                                                                                                                                                              
                            message = successMessage;                                                                                                                                                                                                          
                            let status = response.E_STATUS;                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
                            $.ajax({                                                                                                                                                                                                                           
                              method: "GET",                                                                                                                                                                                                                   
                              url:                                                                                                                                                                                                                             
                                "http://localhost:8080/v1/intfsap/" + idIntfSap,                                                                                                                                                                               
                              contentType: "application/json",                                                                                                                                                                                                 
                              success: function (response) {                                                                                                                                                                                                   
                                response.msg = message;                                                                                                                                                                                                        
                                response.status = status;                                                                                                                                                                                                      
                                $.ajax({                                                                                                                                                                                                                       
                                  method: "PUT",                                                                                                                                                                                                               
                                  url:                                                                                                                                                                                                                         
                                    "http://localhost:8080/v1/intfsap/" +                                                                                                                                                                                      
                                    idIntfSap,                                                                                                                                                                                                                 
                                  contentType: "application/json",                                                                                                                                                                                             
                                  data: JSON.stringify(response),                                                                                                                                                                                              
                                  success: function (response) {                                                                                                                                                                                               
                                    MessageBox.success(                                                                                                                                                                                                        
                                      "TransferÃªncia realizada com sucesso!"                                                                                                                                                                                   
                                    );                                                                                                                                                                                                                         
                                    that.onClear();                                                                                                                                                                                                            
                                  }.bind(this),                                                                                                                                                                                                                
                                });                                                                                                                                                                                                                            
                              },                                                                                                                                                                                                                               
                            });                                                                                                                                                                                                                                
                          }.bind(this),                                                                                                                                                                                                                        
                          error: function (error) {                                                                                                                                                                                                            
                            // MessageBox.error("Erro ao criar OT");                                                                                                                                                                                           
                          },                                                                                                                                                                                                                                   
                        });                                                                                                                                                                                                                                    
                      }.bind(this),                                                                                                                                                                                                                            
                      error: function (error) {                                                                                                                                                                                                                
                        MessageBox.error(                                                                                                                                                                                                                      
                          `Erro ao Transferir Material para PosiÃ§Ã£o ${nlpla}`                                                                                                                                                                                  
                        );                                                                                                                                                                                                                                     
                        // let url_put = `http://localhost:8080/v1/lqua/${werks}/${vltyp}/${vlpla}/${matnr}/${charg}/${verme}/updatebalance`;                                                                                                                  
                        // $.ajax({                                                                                                                                                                                                                            
                        //   method: "GET",                                                                                                                                                                                                                    
                        //   url: url_put,                                                                                                                                                                                                                     
                        //   contentType: "application/json",                                                                                                                                                                                                  
                        //   success: function (response) {                                                                                                                                                                                                    
                        //     MessageBox.success(                                                                                                                                                                                                             
                        //       "TransferÃªncia realizada com sucesso!"                                                                                                                                                                                        
                        //     );                                                                                                                                                                                                                              
                        //     this.onClear();                                                                                                                                                                                                                 
                        //   },                                                                                                                                                                                                                                
                        // });                                                                                                                                                                                                                                 
                      }.bind(this),                                                                                                                                                                                                                            
                    });                                                                                                                                                                                                                                        
                  },                                                                                                                                                                                                                                           
                  error: function (error) {                                                                                                                                                                                                                    
                    MessageBox.error(                                                                                                                                                                                                                          
                      `Erro ao Transferir Material para PosiÃ§Ã£o ${nlpla}`                                                                                                                                                                                      
                    );                                                                                                                                                                                                                                         
                    //console.log(error);                                                                                                                                                                                                                      
                  },                                                                                                                                                                                                                                           
                });                                                                                                                                                                                                                                            
              }                                                                                                                                                                                                                                                
            }.bind(this),                                                                                                                                                                                                                                      
            error: function (error) {                                                                                                                                                                                                                          
              MessageBox.error(                                                                                                                                                                                                                                
                `Erro ao Transferir Material para PosiÃ§Ã£o ${nlpla}`                                                                                                                                                                                            
              );                                                                                                                                                                                                                                               
            },                                                                                                                                                                                                                                                 
          });                                                                                                                                                                                                                                                  
        },                                                                                                                                                                                                                                                     
      }                                                                                                                                                                                                                                                        
    );                                                                                                                                                                                                                                                         
  }                                                                                                                                                                                                                                                            
);                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               