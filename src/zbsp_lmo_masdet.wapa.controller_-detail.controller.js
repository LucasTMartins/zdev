sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/m/library","sap/ui/core/Fragment","sap/m/MessageToast","sap/m/MessageBox"],function(e,t,i,s,o,n,a){"use strict";var r=s.URLHelper;return e.extend("com.lit.zui5.mast+
er.detail.controller.Detail",{formatter:i,onInit:function(){var e=new t({busy:false,delay:0,lineItemListTitle:this.getResourceBundle().getText("detailLineItemTableHeading")});this.getRouter().getRoute("object").attachPatternMatched(this._onObjectMatched,+
this);this.setModel(e,"detailView");this.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this))},onSendEmailPress:function(){var e=this.getModel("detailView");r.triggerEmail(null,e.getProperty("/shareSendEmailSubject"),e.+
getProperty("/shareSendEmailMessage"))},onListUpdateFinished:function(e){var t,i=e.getParameter("total"),s=this.getModel("detailView");if(this.byId("lineItemsList").getBinding("items").isLengthFinal()){if(i){t=this.getResourceBundle().getText("detailLine+
ItemTableHeadingCount",[i])}else{t=this.getResourceBundle().getText("detailLineItemTableHeading")}s.setProperty("/lineItemListTitle",t)}},_onObjectMatched:function(e){var t=e.getParameter("arguments").objectId;this.getModel("appView").setProperty("/layou+
t","TwoColumnsMidExpanded");this.getModel().metadataLoaded().then(function(){var e=this.getModel().createKey("ScarrSet",{Carrid:t});this._bindView("/"+e)}.bind(this))},_bindView:function(e){var t=this.getModel("detailView");t.setProperty("/busy",false);t+
his.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){t.setProperty("/busy",true)},dataReceived:function(){t.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=e.getElem+
entBinding();if(!t.getBoundContext()){this.getRouter().getTargets().display("detailObjectNotFound");this.getOwnerComponent().oListSelector.clearListListSelection();return}var i=t.getPath(),s=this.getResourceBundle(),o=e.getModel().getObject(i),n=o.Carrid+
,a=o.Carrname,r=this.getModel("detailView");this.getOwnerComponent().oListSelector.selectAListItem(i);r.setProperty("/shareSendEmailSubject",s.getText("shareSendEmailObjectSubject",[n]));r.setProperty("/shareSendEmailMessage",s.getText("shareSendEmailObj+
ectMessage",[a,n,location.href]))},_onMetadataLoaded:function(){var e=this.getView().getBusyIndicatorDelay(),t=this.getModel("detailView"),i=this.byId("lineItemsList"),s=i.getBusyIndicatorDelay();t.setProperty("/delay",0);t.setProperty("/lineItemTableDel+
ay",0);i.attachEventOnce("updateFinished",function(){t.setProperty("/lineItemTableDelay",s)});t.setProperty("/busy",true);t.setProperty("/delay",e)},onCloseDetailPress:function(){this.getModel("appView").setProperty("/actionButtonsInfo/midColumn/fullScre+
en",false);this.getRouter().navTo("list")},toggleFullScreen:function(){var e=this.getModel("appView").getProperty("/actionButtonsInfo/midColumn/fullScreen");this.getModel("appView").setProperty("/actionButtonsInfo/midColumn/fullScreen",!e);if(!e){this.ge+
tModel("appView").setProperty("/previousLayout",this.getModel("appView").getProperty("/layout"));this.getModel("appView").setProperty("/layout","MidColumnFullScreen")}else{this.getModel("appView").setProperty("/layout",this.getModel("appView").getPropert+
y("/previousLayout"))}},onEditCompanyBtnPress:function(e){var t=this.getView().getModel("editCompanyModel");t.setProperty("/isNew",false);if(!this.oDialogEditCompany){this.oDialogEditCompany=o.load({id:this.getView().getId(),name:"com.lit.zui5.master.det+
ail.view.EditCompanyDialog",controller:this}).then(function(e){this.getView().addDependent(e);e.addStyleClass(this.getOwnerComponent().getContentDensityClass());this.oDialogEditCompany=e;this.oDialogEditCompany.open()}.bind(this))}else{this.oDialogEditCo+
mpany.open()}},onSaveCompanyButtonPress:function(e){var t=this.getView().getModel();t.submitChanges({success:this.handleSuccessSave.bind(this),error:this.handleSaveError.bind(this)})},onCancelNewCompany:function(e){var t=this.getView().getModel();t.reset+
Changes();this.oDialogEditCompany.close()},onBtnDeletePress:function(e){var t=this.getView().getModel(),i=this.getView().getBindingContext(),s=this;a.warning("O Registro Ser� exclu�do! Deseja continuar?",{actions:[a.Action.OK,a.Action.CANCEL],onClose:fun+
ction(e){if(e==a.Action.OK){t.remove(i.getPath(),{success:s.handleSuccessDelete.bind(s),error:s.handleErrorDelete.bind(s)})}}})},handleSuccessSave:function(e,t){var i=this.getView().getModel();if(e.__batchResponses){if(e.__batchResponses[0].response){var+
 s=parseInt(e.__batchResponses[0].response.statusCode);if(s>=400){var o=JSON.parse(e.__batchResponses[0].response.body);a.alert("Erro ao Salvar. ERRO:"+o.error.message.value);i.resetChanges();i.refresh()}else{n.show("Salvo com sucesso!");this.oDialogEdit+
Company.close()}}else if(e.__batchResponses[0].__changeResponses){var r=e.__batchResponses[0].__changeResponses;var s=parseInt(r[0].statusCode);if(s>=400){a.alert("Erro ao Salvar");i.resetChanges();i.refresh()}else{n.show("Salvo com sucesso!");this.oDial+
ogEditCompany.close()}}}else{n.show("Salvo com sucesso!");this.oDialogEditCompany.close()}},handleSaveError:function(e){if(e){if(e.responseText){var t=JSON.parse(e.responseText);a.alert(t.error.message.value)}}},handleSuccessDelete:function(e){n.show("Re+
gistro Exclu�do com sucesso!");this.oDialogEditCompany.close()},handleErrorDelete:function(e){if(e){if(e.responseText){var t=JSON.parse(e.responseText);a.alert(t.error.message.value)}}},onListItemPressed:function(e){var t,i;t=e.getSource();i=t.getBinding+
Context();this.getRouter().navTo("flightDetail",{Carrid:i.getProperty("Carrid"),Connid:i.getProperty("Connid")})},onBtnCreatePress:function(e){var t=this.getView(),i=t.getBindingContext();this.getRouter().navTo("flightDetail",{Carrid:i.getProperty("Carri+
d"),Connid:"New"})}})});                                                                                                                                                                                                                                       
//# sourceMappingURL=Detail.controller.js.map                                                                                                                                                                                                                  