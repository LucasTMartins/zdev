sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/m/library","sap/ui/core/Fragment","sap/m/MessageToast","sap/m/MessageBox"],function(e,t,s,r,a,i,n){"use strict";return e.extend("com.lit.zui5.master.detail.controll+
er.FlightDetail",{formatter:s,onInit:function(){var e=this.getRouter();e.getRoute("flightDetail").attachMatched(this._onRouteMatched,this)},_onRouteMatched:function(e){var t=e.getParameter("arguments").Carrid,s=e.getParameter("arguments").Connid,r=this.g+
etView();debugger;var a=this.getView().getModel("editFlightModel");a.setProperty("/isNew",false);if(s!=="New"){var i=this.getModel().createKey("SpfliSet",{Carrid:t,Connid:s});r.bindElement({path:"/"+i,events:{change:this._onBindingChange.bind(this),dataR+
equested:function(e){r.setBusy(true)},dataReceived:function(e){r.setBusy(false)}}})}else{this._initNewFlight(t)}},_initNewFlight:function(e){debugger;var t=this.getView().getModel("editFlightModel");t.setProperty("/isNew",true);var s=this.getView().getMo+
del();s.setDeferredGroups(["createFlightId"]);s.setChangeGroups({SpfliSet:{groupId:"createFlightId",changeSetId:"ID"}});var r=s.createEntry("/SpfliSet",{groupId:"createFlightId",properties:{Carrid:e}});var a=this.getView();a.bindElement(r.getPath())},_on+
BindingChange:function(e){if(!this.getView().getBindingContext()){this.getRouter().getTargets().display("notFound")}},onBtnSavePress:function(e){var t=this.getView().getModel();t.submitChanges({success:this.handleSuccessSave.bind(this),error:this.handleS+
aveError.bind(this)})},onBtnDeletePress:function(e){var t=this.getView().getModel(),s=this.getView().getBindingContext(),r=this;n.warning("O Registro Ser� exclu�do! Deseja continuar?",{actions:[n.Action.OK,n.Action.CANCEL],onClose:function(e){if(e==n.Act+
ion.OK){t.remove(s.getPath(),{success:r.handleSuccessDelete.bind(r),error:r.handleErrorDelete.bind(r)})}}})},handleSuccessSave:function(e,t){var s=this.getView().getModel();if(e.__batchResponses){if(e.__batchResponses[0].response){var r=parseInt(e.__batc+
hResponses[0].response.statusCode);if(r>=400){var a=JSON.parse(e.__batchResponses[0].response.body);n.alert("Erro ao Salvar. ERRO:"+a.error.message.value);s.resetChanges();s.refresh()}else{i.show("Salvo com sucesso!");this.onNavBack()}}else if(e.__batchR+
esponses[0].__changeResponses){var o=e.__batchResponses[0].__changeResponses;var r=parseInt(o[0].statusCode);if(r>=400){n.alert("Erro ao Salvar");s.resetChanges();s.refresh()}else{i.show("Salvo com sucesso!");this.onNavBack()}}}else{i.show("Salvo com suc+
esso!");this.onNavBack()}},handleSaveError:function(e){if(e){if(e.responseText){var t=JSON.parse(e.responseText);n.alert(t.error.message.value)}}},handleSuccessDelete:function(e){i.show("Registro Exclu�do com sucesso!");this.onNavBack()},handleErrorDelet+
e:function(e){if(e){if(e.responseText){var t=JSON.parse(e.responseText);n.alert(t.error.message.value)}}}})});                                                                                                                                                 
//# sourceMappingURL=FlightDetail.controller.js.map                                                                                                                                                                                                            