sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageBox"],function(t,e,i){"use strict";return t.extend("br.com.lit.zui5.ne.logistics.offline.controller.ColetorTransfStock",{onInit:function(){sap.ui.getCore().applyChang+
es();this.byId("idWerks").focus();var t=this.getOwnerComponent().getModel("i18n").getResourceBundle();this._oResourceBundle=t;var e="";var i="";this._letyp=e;this._lgort=i},alphaInputMaterial(t){const e=18;const i=e-t.length;const s="0".repeat(i)+t;retur+
n s},alphaOutputMaterial(t){return t.replace(/^0+/,"")},onClear:function(){this.byId("idWerks").setValue("");this.byId("idLgnum").setValue("");this.byId("idVlpla").setValue("");this.byId("idVltyp").setValue("");this.byId("idMatnr").setValue("");this.byId+
("idMaktx").setValue("");this.byId("idCharg").setValue("");this.byId("idVerme").setValue("");this.byId("idMeins").setValue("");this.byId("idNlpla").setValue("");this.byId("idNltyp").setValue("");this.byId("idWerks").setEditable(true);this.byId("idLgnum")+
.setEditable(true);this.byId("idVlpla").setEditable(true);this.byId("idVltyp").setEditable(true);this.byId("idMatnr").setEditable(true);this.byId("idVerme").setEditable(true);this.byId("idNlpla").setEditable(true);this.byId("idNltyp").setEditable(true);t+
his.byId("idWerks").focus(false)},checkWerks:function(t){let e=this.byId("idWerks").getValue();let s=`http://localhost:8080/v1/lgnum?werks=${e.toUpperCase()}`;e=e.replace(" ","");$.ajax({method:"GET",url:s,contentType:"application/json",success:function(+
t){const s=t.some(t=>t.werks===e.toUpperCase());if(!s){this.byId("idWerks").setValue("");this.byId("idWerks").focus();i.error(this._oResourceBundle.getText("werksNotFound"));return}this.byId("idLgnum").focus();this.byId("idWerks").setValue(this.byId("idW+
erks").getValue().toUpperCase());this.byId("idWerks").setEditable(false)}.bind(this),error:function(t){this.byId("idWerks").setValue("");this.byId("idWerks").focus();i.error(this._oResourceBundle.getText("werksNotFound"))}.bind(this)})},checkLgnum:functi+
on(t){let e=this.byId("idWerks").getValue();let s=this.byId("idLgnum").getValue();let l=`http://localhost:8080/v1/lgnum?lgnum=${s.toUpperCase()}`;if(e==""){this.byId("idLgnum").setValue("");this.byId("idWerks").focus(false);i.error(this._oResourceBundle.+
getText("werksObrigatory"));return}s=s.replace(" ","");$.ajax({method:"GET",url:l,contentType:"application/json",success:function(t){if(t.length==0){this.byId("idLgnum").setValue("");this.byId("idLgnum").focus();i.error(this._oResourceBundle.getText("lgn+
umNotFound"));return}this.byId("idVltyp").focus();this.byId("idLgnum").setValue(this.byId("idLgnum").getValue().toUpperCase());this.byId("idLgnum").setEditable(false)}.bind(this),error:function(t){this.byId("idLgnum").setValue("");this.byId("idLgnum").fo+
cus();i.error(this._oResourceBundle.getText("lgnumNotFound"))}.bind(this)})},checkVltyp:function(t){let e=this.byId("idVltyp").getValue();let s=this.byId("idLgnum").getValue();let l=`http://localhost:8080/v1/lgtyp?lgnum=${s}&lgtyp=${e}`;if(s==""){this.by+
Id("idVltyp").setValue("");this.byId("idLgnum").focus(false);i.error(this._oResourceBundle.getText("lgnumObrigatory"));return}e=e.replace(" ","");$.ajax({method:"GET",url:l,contentType:"application/json",success:function(t){if(t.length==0){this.byId("idV+
ltyp").setValue("");this.byId("idVltyp").focus();i.error(this._oResourceBundle.getText("vltypNotFound"));return}this.byId("idVlpla").focus();this.byId("idVltyp").setValue(this.byId("idVltyp").getValue().toUpperCase());this.byId("idVltyp").setEditable(fal+
se)}.bind(this),error:function(t){this.byId("idVltyp").setValue("");this.byId("idVltyp").focus();i.error(this._oResourceBundle.getText("vltypNotFound"))}.bind(this)})},checkVlpla:function(t){let e=this.byId("idVltyp").getValue();let s=this.byId("idVlpla"+
).getValue();let l=this.byId("idLgnum").getValue();let a=`http://localhost:8080/v1/lagp?lgnum=${l}&lgtyp=${e}&lgpla=${s}`;if(e==""){this.byId("idVlpla").setValue("");this.byId("idVltyp").focus(false);i.error(this._oResourceBundle.getText("vltypObrigatory+
"));return}s=s.replace(" ","");$.ajax({method:"GET",url:a,contentType:"application/json",success:function(t){if(t.length==0){this.byId("idVlpla").setValue("");this.byId("idVlpla").focus();i.error(this._oResourceBundle.getText("vlplaNotFound",[e]));return+
}this.byId("idMatnr").focus();this.byId("idVlpla").setValue(this.byId("idVlpla").getValue().toUpperCase());this.byId("idVlpla").setEditable(false)}.bind(this),error:function(t){this.byId("idVlpla").setValue("");this.byId("idVlpla").focus();i.error(this._+
oResourceBundle.getText("vlplaNotFound"))}.bind(this)})},checkMatnr:function(t){let e=this.byId("idVltyp").getValue();let s=this.byId("idVlpla").getValue();let l=this.byId("idMatnr").getValue();let a=this.byId("idLgnum").getValue();l=this.alphaInputMater+
ial(l);l=l.replace(" ","");let n=`http://localhost:8080/v1/lqua?lgnum=${a}&lgtyp=${e}&lgpla=${s}&matnr=${l}`;if(s==""){this.byId("idMatnr").setValue("");this.byId("idVlpla").focus(false);i.error(this._oResourceBundle.getText("vlplaObrigatory"));return}$.+
ajax({method:"GET",url:n,contentType:"application/json",success:function(t){if(t.length==0){this.byId("idMatnr").setValue("");this.byId("idMatnr").focus();i.error(this._oResourceBundle.getText("matnrNotFound"));return}this.byId("idVerme").focus();this.by+
Id("idMatnr").setValue(this.byId("idMatnr").getValue().toUpperCase());this.letyp=t[0].letyp;this.lgort=t[0].lgort;var e=this.byId("idMatnr").getValue();e.replace(/^0+/,"");this.byId("idMatnr").setValue(e);this.byId("idMatnr").setEditable(false);this.byId+
("idMaktx").setValue(t[0].maktx);if(t[0].charg==0){this.byId("idCharg").setValue("")}else{this.byId("idCharg").setValue(t[0].charg)}this.byId("idMeins").setValue(t[0].meins)}.bind(this),error:function(t){this.byId("idMatnr").setValue("");this.byId("idMat+
nr").focus();i.error(this._oResourceBundle.getText("matnrNotFound"))}.bind(this)})},checkVerme:function(t){const e=/[^0-9]/;let s=this.byId("idVltyp").getValue();let l=this.byId("idVlpla").getValue();let a=this.byId("idMatnr").getValue();let n=this.byId(+
"idLgnum").getValue();let r=this.byId("idVerme").getValue();a=this.alphaInputMaterial(a);let o=`http://localhost:8080/v1/lqua?lgnum=${n}&lgtyp=${s}&lgpla=${l}&matnr=${a}`;if(a==""){this.byId("idVerme").setValue("");this.byId("idMatnr").focus(false);i.err+
or(this._oResourceBundle.getText("matnrObrigatory"));return}if(e.test(r)){this.byId("idVerme").setValue("");this.byId("idVerme").focus(false);i.error(this._oResourceBundle.getText("vermeInvalid"));return}r=r.replace(" ","");$.ajax({method:"GET",url:o,con+
tentType:"application/json",success:function(t){if(t.length==0){this.byId("idVerme").setValue("");this.byId("idVerme").focus();i.error(this._oResourceBundle.getText("matnrNotFound"));return}if(r>t[0].verme){i.error(this._oResourceBundle.getText("vermeIsL+
arger"));this.byId("idVerme").setValue("");this.byId("idVerme").focus();return}this.byId("idNltyp").focus(false);this.byId("idVerme").setValue(this.byId("idVerme").getValue().toUpperCase())}.bind(this),error:function(t){this.byId("idVerme").setValue("");+
this.byId("idVerme").focus();i.error(this._oResourceBundle.getText("matnrNotFound"))}.bind(this)})},checkNltyp:function(t){let e=this.byId("idNltyp").getValue();let s=this.byId("idVerme").getValue();let l=this.byId("idLgnum").getValue();let a=`http://loc+
alhost:8080/v1/lgtyp?lgnum=${l}&lgtyp=${e}`;if(s==""){this.byId("idNltyp").setValue("");this.byId("idVerme").focus(false);i.error(this._oResourceBundle.getText("vermeObrigatory"));return}e=e.replace(" ","");$.ajax({method:"GET",url:a,contentType:"applica+
tion/json",success:function(t){if(t.length==0){this.byId("idNltyp").setValue("");this.byId("idNltyp").focus();i.error(this._oResourceBundle.getText("nltypNotFound"));return}this.byId("idNlpla").focus(false);this.byId("idNltyp").setValue(this.byId("idNlty+
p").getValue().toUpperCase());this.byId("idNltyp").setEditable(false)}.bind(this),error:function(t){this.byId("idNltyp").setValue("");this.byId("idNltyp").focus();i.error(this._oResourceBundle.getText("nltypNotFound"))}.bind(this)})},checkNlpla:function(+
t){let e=this.byId("idNltyp").getValue();let s=this.byId("idNlpla").getValue();let l=this.byId("idLgnum").getValue();let a=`http://localhost:8080/v1/lagp?lgnum=${l}&lgtyp=${e}&lgpla=${s}`;if(e==""){this.byId("idNlpla").setValue("");this.byId("idNltyp").f+
ocus(false);i.error(this._oResourceBundle.getText("nltypObrigatory"));return}s=s.replace(" ","");$.ajax({method:"GET",url:a,contentType:"application/json",success:function(t){if(t.length==0){this.byId("idNlpla").setValue("");this.byId("idNlpla").focus();+
i.error(this._oResourceBundle.getText("nlplaNotFound",[e]));return}this.byId("btnSave").focus();this.byId("idNlpla").setValue(this.byId("idNlpla").getValue().toUpperCase());this.byId("idNlpla").setEditable(false)}.bind(this),error:function(t){this.byId("+
idNlpla").setValue("");this.byId("idNlpla").focus();i.error(this._oResourceBundle.getText("nlplaNotFound"))}.bind(this)})},onSave:function(t){const e=this.getOwnerComponent().USERNAME;const s=this.getOwnerComponent().PASSWORD;let l="";let a;const n=new D+
ate;const r=n.getFullYear();const o=String(n.getMonth()+1).padStart(2,"0");const d=String(n.getDate()).padStart(2,"0");const u=String(n.getHours()).padStart(2,"0");const h=String(n.getMinutes()).padStart(2,"0");const c=String(n.getSeconds()).padStart(2,"+
0");const p=`${r}-${o}-${d}T${u}:${h}:${c}`;let y=this.byId("idLgnum").getValue();let b=this.byId("idWerks").getValue();let g=this.byId("idVltyp").getValue();let I=this.byId("idVlpla").getValue();let f=this.byId("idMatnr").getValue();let V=this.byId("idC+
harg").getValue();let m=this.byId("idMeins").getValue();let T=this.byId("idVerme").getValue();let N=this.byId("idNltyp").getValue();let _=this.byId("idNlpla").getValue();let E;let x=this.letyp;let M=this.lgort;if(V==""){V=0}let S=this;f=this.alphaInputMa+
terial(f);let L={werks:b,vltyp:g,vlpla:I,nltyp:N,nlpla:_,matnr:f,charg:V,verme:T,meins:m,letyp:this.letyp,msg:"Material pendente de criação de OT",crdate:p,status:"PENDING",active:true};$.ajax({method:"GET",url:"http://localhost:8080/v1/intfsap",contentT+
ype:"application/json",success:function(t){let a=t.some(t=>t.lgnum.lgnum===y&&t.werks===b&&t.vltyp===g&&t.vlpla===I&&t.matnr===f&&t.charg===V&&t.meins===m&&t.nltyp===N&&t.nlpla===_)?"X":"";if(a=="X"){i.warning(`Transferência para a posição ${_} já foi re+
alizada anteriormente. Deseja realizar novamente a transferência?`,{actions:[i.Action.OK,i.Action.CANCEL],emphasizedAction:i.Action.OK,onClose:function(t){if(t===i.Action.OK){$.ajax({method:"GET",url:`http://localhost:8080/v1/lqua?werks=${b}&lgtyp=${g}&l+
gpla=${I}&matnr=${f}`,contentType:"application/json",success:function(t){l="";l=`http://localhost:8080/v1/intfsap/${b}`;$.ajax({method:"POST",url:l,contentType:"application/json",data:JSON.stringify(L),success:function(t){E=t.id;$.ajax({method:"POST",url+
:"/proxy/sap/bc/gui/sap/its/fmcall_json/ZWMF_TRANSF_POSICAO_API",contentType:"application/json",headers:{Authorization:"Basic "+btoa(e+":"+s)},data:JSON.stringify({I_LGNUM:y,I_MATNR:f,I_WERKS:b,I_LGORT:M,I_CHARG:V,I_LETYP:x,I_ANFME:T,I_ALTME:m,I_VLTYP:g,+
I_VLPLA:I,I_NLTYP:N,I_NLPLA:_}),success:function(t){const e="Tranferência realizada com sucesso";let s=t.E_STATUS==="SUCCESS"?e:t.E_MSG;s=e;let l=t.E_STATUS;$.ajax({method:"GET",url:"http://localhost:8080/v1/intfsap/"+E,contentType:"application/json",suc+
cess:function(t){t.msg=s;t.status=l;$.ajax({method:"PUT",url:"http://localhost:8080/v1/intfsap/"+E,contentType:"application/json",data:JSON.stringify(t),success:function(t){i.success("Transferência realizada com sucesso!");S.onClear()}.bind(this)})}})}})+
}.bind(this),error:function(t){}.bind(this)})},error:function(t){console.log(t)}})}else if(t===i.Action.CANCEL){return}}.bind(this),dependentOn:this.getView()})}else{$.ajax({method:"GET",url:`http://localhost:8080/v1/lqua?werks=${b}&lgtyp=${g}&lgpla=${I}+
&matnr=${f}`,contentType:"application/json",success:function(t){l="";l=`http://localhost:8080/v1/intfsap/${b}`;$.ajax({method:"POST",url:l,contentType:"application/json",data:JSON.stringify(L),success:function(t){E=t.id;$.ajax({method:"POST",url:"/proxy/+
sap/bc/gui/sap/its/fmcall_json/ZWMF_TRANSF_POSICAO_API",contentType:"application/json",headers:{Authorization:"Basic "+btoa(e+":"+s)},data:JSON.stringify({I_LGNUM:y,I_MATNR:f,I_WERKS:b,I_LGORT:M,I_CHARG:V,I_LETYP:x,I_ANFME:T,I_ALTME:m,I_VLTYP:g,I_VLPLA:I+
,I_NLTYP:N,I_NLPLA:_}),success:function(t){const e="Tranferência realizada com sucesso";let s=t.E_STATUS==="SUCCESS"?e:t.E_MSG;s=e;let l=t.E_STATUS;$.ajax({method:"GET",url:"http://localhost:8080/v1/intfsap/"+E,contentType:"application/json",success:func+
tion(t){t.msg=s;t.status=l;$.ajax({method:"PUT",url:"http://localhost:8080/v1/intfsap/"+E,contentType:"application/json",data:JSON.stringify(t),success:function(t){i.success("Transferência realizada com sucesso!");S.onClear()}.bind(this)})}})}.bind(this)+
,error:function(t){}})}.bind(this),error:function(t){i.error(`Erro ao Transferir Material para Posição ${_}`)}.bind(this)})},error:function(t){i.error(`Erro ao Transferir Material para Posição ${_}`)}})}}.bind(this),error:function(t){i.error(`Erro ao Tra+
nsferir Material para Posição ${_}`)}})}})});                                                                                                                                                                                                                  
//# sourceMappingURL=ColetorTransfStock.controller.js.map                                                                                                                                                                                                      