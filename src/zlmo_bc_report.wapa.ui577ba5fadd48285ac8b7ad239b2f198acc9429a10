sap.ui.define([                                                                                                                                                                                                                                                
    "sap/ui/core/Fragment"                                                                                                                                                                                                                                     
],                                                                                                                                                                                                                                                             
    function (Fragment) {                                                                                                                                                                                                                                      
        'use strict';                                                                                                                                                                                                                                          
        return {                                                                                                                                                                                                                                               
            sPath: "",                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
            onEdit: function (oEvent) {                                                                                                                                                                                                                        
                this._getSelectedRow();                                                                                                                                                                                                                        
                if (this._getProperty("/Userid", "modelView") != undefined) { this._getValueHelpRequest() }                                                                                                                                                    
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            _getProperty: function (sProperty, sModel) {                                                                                                                                                                                                       
                return this.getView().getModel(sModel).getProperty(sProperty);                                                                                                                                                                                 
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            _setProperty: function (sPath, sProperty, sModel) {                                                                                                                                                                                                
                return this.getView().getModel(sModel).setProperty(sPath, sProperty);                                                                                                                                                                          
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            _getSelectedRow: function () {                                                                                                                                                                                                                     
                this.sPath = this.getView().byId("listReport").getTable().getSelectedContextPaths()[0];                                                                                                                                                        
                let sEmail = this._getProperty(this.sPath + "/Email");                                                                                                                                                                                         
                let sFullname = this._getProperty(this.sPath + "/Fullname");                                                                                                                                                                                   
                let sUserid = this._getProperty(this.sPath + "/Userid");                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
                this._setProperty("/Email", sEmail, "modelView");                                                                                                                                                                                              
                this._setProperty("/Fullname", sFullname, "modelView");                                                                                                                                                                                        
                this._setProperty("/Userid", sUserid, "modelView");                                                                                                                                                                                            
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            _getValueHelpRequest: function () {                                                                                                                                                                                                                
                var oView = this.getView();                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
                if (!this._pValueHelpDialog) {                                                                                                                                                                                                                 
                    this._pValueHelpDialog = Fragment.load({                                                                                                                                                                                                   
                        id: oView.getId(),                                                                                                                                                                                                                     
                        name: "com.lit.zui5.relatorio.base.conhecimento.lmo.fragment.DialogEdit",                                                                                                                                                              
                        controller: this                                                                                                                                                                                                                       
                    }).then(function (oValueHelpDialog) {                                                                                                                                                                                                      
                        oView.addDependent(oValueHelpDialog);                                                                                                                                                                                                  
                        return oValueHelpDialog;                                                                                                                                                                                                               
                    });                                                                                                                                                                                                                                        
                }                                                                                                                                                                                                                                              
                this._pValueHelpDialog.then(function (oValueHelpDialog) {                                                                                                                                                                                      
                    oValueHelpDialog.open();                                                                                                                                                                                                                   
                }.bind(this));                                                                                                                                                                                                                                 
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            onSave: function () {                                                                                                                                                                                                                              
                var sEmail = this._getProperty("/Email", "modelView");                                                                                                                                                                                         
                var sFullname = this._getProperty("/Fullname", "modelView");                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
                this._setProperty(this.sPath + "/Email", sEmail);                                                                                                                                                                                              
                this._setProperty(this.sPath + "/Fullname", sFullname);                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
                this.getView().getModel().submitChanges();                                                                                                                                                                                                     
                this.getView().getModel().refresh();                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
                this.onClose();                                                                                                                                                                                                                                
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            onClose: function () {                                                                                                                                                                                                                             
                this.oDialog = this.getView().byId("ListDialog");                                                                                                                                                                                              
                this.oDialog.close();                                                                                                                                                                                                                          
            },                                                                                                                                                                                                                                                 
        };                                                                                                                                                                                                                                                     
    });                                                                                                                                                                                                                                                        