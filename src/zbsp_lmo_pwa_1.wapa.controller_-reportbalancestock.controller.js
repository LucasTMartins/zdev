sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/ui/Device","../model/formatter"],function(e,t,i,a+
,o,l,r,n,s){"use strict";return e.extend("br.com.lit.zui5.ne.logistics.offline.controller.ReportBalanceStock",{formatter:s,onInit:function(){const e=this.getOwnerComponent().getRouter();e.getRoute("RouteReportBalanceStock").attachPatternMatched(this.onBe+
foreShow,this);e.getRoute("RouteMenu").attachPatternMatched(this.onAfterHide,this);var t=new a({page:0,previousPageAvailable:false,nextPageAvailable:false});this.getView().setModel(t,"BalanceStockPage");var i=new a;this.getView().setModel(i,"BalanceStock+
");var o=new a;this.getView().setModel(o,"StatusSAP");var l=new a;this.getView().setModel(l,"FilterLgtyp");var r=new a;this.getView().setModel(r,"FilterLgpla")},onBeforeShow:function(){let e=this.getView().getModel("BalanceStockPage");e.setProperty("/pag+
e",0);this.onClearFilters();this._startAutoRefresh()},onAfterHide:function(){clearInterval(this.intervalHandler)},_startAutoRefresh:function(){let e=this;this.intervalHandler=setInterval(function(){e._getData()},5e5)},_getData:function(){var e=this.getVi+
ew().getModel("BalanceStock");var t=this.getView().getModel("BalanceStockPage");let i=t.getProperty("/page");var a=`http://localhost:8080/v1/lqua?page=${i}&sort=id&sort=werks&sort=lgort&sort=lgnum&sort=lgtyp&sort=lgpla&sort=matnr&sort=crdate`;if(this.get+
View().byId("filtroMaterial").getValue()!==""){a+="&matnr="+this.getView().byId("filtroMaterial").getValue()}if(this.getView().byId("filtroTpDep").getValue()!==""){a+="&lgtyp="+this.getView().byId("filtroTpDep").getValue()}if(this.getView().byId("filtroP+
osition").getValue()!==""){a+="&lgpla="+this.getView().byId("filtroPosition").getValue()}$.ajax({method:"GET",url:a,success:function(t){t.forEach(e=>{if(e.charg=="0"){e.charg=""}e.matnr=e.matnr.replace(/^0+/,"");if(e.crdate){const[t,i]=e.crdate.split("T"+
);e.crdate=t.replace(/-/g,"-");e.hrdate=i.split(".")[0]}});e.setData(t)},error:function(e){console.log(e)}});this.verifyPreviousPage();this.verifyNextPage()},verifyPreviousPage:function(){let e=this.getView().getModel("BalanceStockPage");let t=e.getPrope+
rty("/page");e.setProperty("/previousPageAvailable",t>0?true:false)},verifyNextPage:function(){let e=this.getView().getModel("BalanceStockPage");let t=e.getProperty("/page")+1;var i=`http://localhost:8080/v1/lqua?page=${t}&sort=id&sort=werks&sort=lgort&s+
ort=lgnum&sort=lgtyp&sort=lgpla&sort=matnr&sort=crdate`;if(this.getView().byId("filtroMaterial").getValue()!==""){i+="&matnr="+this.getView().byId("filtroMaterial").getValue()}if(this.getView().byId("filtroTpDep").getValue()!==""){i+="&lgtyp="+this.getVi+
ew().byId("filtroTpDep").getValue()}if(this.getView().byId("filtroPosition").getValue()!==""){i+="&lgpla="+this.getView().byId("filtroPosition").getValue()}$.ajax({method:"GET",url:i,success:function(t){e.setProperty("/nextPageAvailable",t.length>0?true:+
false)},error:function(){e.setProperty("/nextPageAvailable",false)}})},onPreviousPageBtnPress:function(){let e=this.getView().getModel("BalanceStockPage");let t=e.getProperty("/page")-1;e.setProperty("/page",t);this._getData()},onNextPageBtnPress:functio+
n(){let e=this.getView().getModel("BalanceStockPage");let t=e.getProperty("/page")+1;e.setProperty("/page",t);this._getData()},onSearch:function(){this._getData()},onClearFilters:function(){this.getView().byId("filtroMaterial").setValue("");this.getView(+
).byId("filtroTpDep").setValue("");this.getView().byId("filtroPosition").setValue("");this._getData()},onFilterMaterial:function(){this.byId("dialogMat").open();let e=this.getView().getModel("BalanceStock");let t="http://localhost:8080/v1/lqua";$.ajax({m+
ethod:"GET",url:t,contentType:"application/json",success:function(t){t.forEach(e=>{e.matnr=e.matnr.replace(/^0+/,"")});e.setData(t)},error:function(e){console.log(e)}})},onModFilterMaterial:function(){var e=this.getView().byId("materialValueHelpTable");v+
ar t=e.getSelectedItem();if(t){var i=t.getBindingContext("BalanceStock");var a=i.getProperty("matnr")}this.getView("ReportBalanceStock").byId("filtroMaterial").setValue(a);this.byId("dialogMat").close()},onSearchDialogMaterial:function(e){let t=e.getPara+
meter("query");let i=this.byId("materialValueHelpTable");i.getBinding("items").filter(null);if(t){let e=new sap.ui.model.Filter("matnr",sap.ui.model.FilterOperator.Contains,t);i.getBinding("items").filter(e)}},onFilterTpDep:function(){this.byId("dialogTp+
Dep").open();let e=this.getView().getModel("FilterLgtyp");let t="http://localhost:8080/v1/lgtyp";$.ajax({method:"GET",url:t,contentType:"application/json",success:function(t){e.setData(t)},error:function(e){console.log(e)}})},onModFilterTpDep:function(){+
var e=this.getView().byId("tpdepValueHelpTable");var t=e.getSelectedItem();if(t){var i=t.getBindingContext("FilterLgtyp");var a=i.getProperty("lgtyp")}this.getView("ReportBalanceStock").byId("filtroTpDep").setValue(a);this.byId("dialogTpDep").close()},on+
SearchDialogTpdep:function(e){let t=e.getParameter("query");let i=this.byId("tpdepValueHelpTable");i.getBinding("items").filter(null);if(t){let e=new sap.ui.model.Filter("lgtyp",sap.ui.model.FilterOperator.Contains,t);i.getBinding("items").filter(e)}},on+
FilterPosition:function(){this.byId("dialogPosition").open();let e=this.getView().getModel("FilterLgpla");let t="http://localhost:8080/v1/lagp";$.ajax({method:"GET",url:t,contentType:"application/json",success:function(t){e.setData(t)},error:function(e){+
console.log(e)}})},onModFilterPosition:function(){var e=this.getView().byId("positionValueHelpTable");var t=e.getSelectedItem();if(t){var i=t.getBindingContext("FilterLgpla");var a=i.getProperty("lgpla")}this.getView("ReportBalanceStock").byId("filtroPos+
ition").setValue(a);this.byId("dialogPosition").close()},onSearchDialogPosition:function(e){let t=e.getParameter("query");let i=this.byId("positionValueHelpTable");i.getBinding("items").filter(null);if(t){let e=new sap.ui.model.Filter("lgpla",sap.ui.mode+
l.FilterOperator.Contains,t);i.getBinding("items").filter(e)}}})});                                                                                                                                                                                            
//# sourceMappingURL=ReportBalanceStock.controller.js.map                                                                                                                                                                                                      